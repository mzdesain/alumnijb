<!doctype html>
<html lang="id">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistem Pengontrolan Alumni</title>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      height: 100%;
    }
    html {
      height: 100%;
    }
    .sidebar {
      transition: all 0.3s;
      box-shadow: 2px 0 10px rgba(0,0,0,0.1);
    }
    .menu-item {
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 12px;
      font-weight: 500;
    }
    .menu-item:hover {
      transform: translateX(5px);
    }
    .menu-item i {
      width: 20px;
      text-align: center;
    }
    .content-card {
      animation: fadeIn 0.3s;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .loading-spinner {
      border: 3px solid #f3f3f3;
      border-top: 3px solid #3b82f6;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    .stat-card {
      border-radius: 16px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.07);
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 15px rgba(0,0,0,0.12);
    }
    .table-modern {
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }
    .btn-modern {
      border-radius: 10px;
      font-weight: 600;
      transition: all 0.2s;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .btn-modern:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    }
    .modal-backdrop {
      backdrop-filter: blur(4px);
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body>
  <div id="app" class="flex h-full"><!-- Sidebar -->
   <div class="sidebar w-64 shadow-lg" id="sidebar">
    <div class="p-6">
     <div class="flex items-center gap-3 mb-8"><i class="fa fa-graduation-cap text-3xl"></i>
      <h1 class="text-xl font-bold" id="websiteTitle">Sistem Pengontrolan Alumni</h1>
     </div>
     <nav><a href="#" class="menu-item py-3 px-4 rounded-lg mb-2" data-page="beranda"> <i class="fa fa-chart-line"></i> <span>Beranda</span> </a> <a href="#" class="menu-item py-3 px-4 rounded-lg mb-2" data-page="alumni"> <i class="fa fa-users"></i> <span>Alumni</span> </a> <a href="#" class="menu-item py-3 px-4 rounded-lg mb-2" data-page="pendidikan"> <i class="fa fa-user-graduate"></i> <span>Kelanjutan Pendidikan</span> </a> <a href="#" class="menu-item py-3 px-4 rounded-lg mb-2" data-page="iuran"> <i class="fa fa-money-bill-wave"></i> <span>Iuran</span> </a> <a href="#" class="menu-item py-3 px-4 rounded-lg mb-2" data-page="whatsapp"> <i class="fab fa-whatsapp"></i> <span>Group WhatsApp</span> </a> <a href="#" class="menu-item py-3 px-4 rounded-lg mb-2" data-page="tugas"> <i class="fa fa-tasks"></i> <span>Tugas/Pengabdian</span> </a>
      <div class="border-t mt-4 pt-4 mb-4"><a href="#" class="menu-item py-3 px-4 rounded-lg mb-2" data-page="form-daftar" style="background-color: rgba(16, 185, 129, 0.1);"> <i class="fa fa-edit"></i> <span>üìù Form Pendaftaran</span> </a>
      </div>
      <div class="border-t pt-4"><a href="#" class="menu-item py-3 px-4 rounded-lg" id="loginBtn"> <i class="fa fa-lock"></i> <span>Login Admin</span> </a>
      </div>
     </nav>
    </div>
   </div><!-- Main Content -->
   <div class="flex-1 overflow-y-auto">
    <div class="p-8" id="mainContent"><!-- Content will be loaded here -->
    </div>
   </div>
  </div><!-- Login Modal -->
  <div id="loginModal" class="modal-backdrop fixed inset-0 flex items-center justify-center hidden" style="background-color: rgba(0,0,0,0.5); z-index: 1000;">
   <div class="rounded-2xl shadow-2xl p-8 max-w-md w-full">
    <div class="text-center mb-6">
     <div class="inline-flex items-center justify-center w-16 h-16 rounded-full mb-4" style="background-color: rgba(59, 130, 246, 0.1);"><i class="fa fa-lock text-3xl" style="color: #3b82f6;"></i>
     </div>
     <h2 class="text-2xl font-bold">Login Admin</h2>
    </div>
    <form id="loginForm">
     <div class="mb-4"><label class="block mb-2 font-semibold flex items-center gap-2"> <i class="fa fa-user"></i> <span>Username</span> </label> <input type="text" id="username" class="w-full px-4 py-3 border-2 rounded-lg focus:outline-none" required style="border-color: #e5e7eb;">
     </div>
     <div class="mb-6"><label class="block mb-2 font-semibold flex items-center gap-2"> <i class="fa fa-key"></i> <span>Password</span> </label> <input type="password" id="password" class="w-full px-4 py-3 border-2 rounded-lg focus:outline-none" required style="border-color: #e5e7eb;">
     </div>
     <div class="flex gap-3"><button type="submit" class="btn-modern flex-1 py-3 px-4 font-semibold"> <i class="fa fa-sign-in-alt mr-2"></i>Login </button> <button type="button" id="cancelLogin" class="btn-modern flex-1 py-3 px-4 font-semibold"> <i class="fa fa-times mr-2"></i>Batal </button>
     </div>
     <p id="loginError" class="mt-3 text-sm hidden text-center"></p>
    </form>
   </div>
  </div>
  <script>
    // Configuration
    const defaultConfig = {
      background_color: "#f0f4f8",
      sidebar_color: "#ffffff",
      primary_color: "#3b82f6",
      text_color: "#1f2937",
      secondary_color: "#6b7280",
      website_title: "Sistem Pengontrolan Alumni",
      wa_cewek: "https://chat.whatsapp.com/cewek",
      wa_cowok: "https://chat.whatsapp.com/cowok"
    };

    // State
    let alumniData = [];
    let isAdmin = false;
    let currentPage = 'beranda';

    // Data Handler
    const dataHandler = {
      onDataChanged(data) {
        alumniData = data;
        if (currentPage) {
          loadPage(currentPage);
        }
      }
    };

    // Initialize SDKs
    async function initApp() {
      const dataResult = await window.dataSdk.init(dataHandler);
      if (!dataResult.isOk) {
        console.error("Failed to initialize data SDK");
        return;
      }

      if (window.elementSdk) {
        window.elementSdk.init({
          defaultConfig,
          onConfigChange: async (config) => {
            document.body.style.backgroundColor = config.background_color || defaultConfig.background_color;
            document.getElementById('sidebar').style.backgroundColor = config.sidebar_color || defaultConfig.sidebar_color;
            document.getElementById('websiteTitle').textContent = config.website_title || defaultConfig.website_title;
            document.getElementById('websiteTitle').style.color = config.text_color || defaultConfig.text_color;
            
            const menuItems = document.querySelectorAll('.menu-item');
            menuItems.forEach(item => {
              item.style.color = config.text_color || defaultConfig.text_color;
            });
            
            const activeItem = document.querySelector('.menu-item[style*="background"]');
            if (activeItem) {
              activeItem.style.backgroundColor = config.primary_color || defaultConfig.primary_color;
              activeItem.style.color = '#ffffff';
            }

            const modal = document.getElementById('loginModal').querySelector('div');
            modal.style.backgroundColor = config.sidebar_color || defaultConfig.sidebar_color;
            
            const buttons = document.querySelectorAll('button[type="submit"], .btn-primary');
            buttons.forEach(btn => {
              btn.style.backgroundColor = config.primary_color || defaultConfig.primary_color;
              btn.style.color = '#ffffff';
            });
            
            const secondaryButtons = document.querySelectorAll('button[type="button"]:not(.btn-primary), .btn-secondary');
            secondaryButtons.forEach(btn => {
              btn.style.backgroundColor = config.secondary_color || defaultConfig.secondary_color;
              btn.style.color = '#ffffff';
            });
          },
          mapToCapabilities: (config) => ({
            recolorables: [
              {
                get: () => config.background_color || defaultConfig.background_color,
                set: (value) => {
                  if (window.elementSdk) {
                    window.elementSdk.setConfig({ background_color: value });
                  }
                }
              },
              {
                get: () => config.sidebar_color || defaultConfig.sidebar_color,
                set: (value) => {
                  if (window.elementSdk) {
                    window.elementSdk.setConfig({ sidebar_color: value });
                  }
                }
              },
              {
                get: () => config.text_color || defaultConfig.text_color,
                set: (value) => {
                  if (window.elementSdk) {
                    window.elementSdk.setConfig({ text_color: value });
                  }
                }
              },
              {
                get: () => config.primary_color || defaultConfig.primary_color,
                set: (value) => {
                  if (window.elementSdk) {
                    window.elementSdk.setConfig({ primary_color: value });
                  }
                }
              },
              {
                get: () => config.secondary_color || defaultConfig.secondary_color,
                set: (value) => {
                  if (window.elementSdk) {
                    window.elementSdk.setConfig({ secondary_color: value });
                  }
                }
              }
            ],
            borderables: [],
            fontEditable: undefined,
            fontSizeable: undefined
          }),
          mapToEditPanelValues: (config) => new Map([
            ["website_title", config.website_title || defaultConfig.website_title],
            ["wa_cewek", config.wa_cewek || defaultConfig.wa_cewek],
            ["wa_cowok", config.wa_cowok || defaultConfig.wa_cowok]
          ])
        });

        if (window.elementSdk.config) {
          await dataHandler.onDataChanged(alumniData);
        }
      }

      loadPage('beranda');
    }

    // Navigation
    document.querySelectorAll('.menu-item').forEach(item => {
      item.addEventListener('click', (e) => {
        e.preventDefault();
        const page = e.currentTarget.getAttribute('data-page');
        if (page) {
          loadPage(page);
          document.querySelectorAll('.menu-item').forEach(mi => {
            mi.style.backgroundColor = 'transparent';
            const config = window.elementSdk?.config || defaultConfig;
            mi.style.color = config.text_color || defaultConfig.text_color;
          });
          const config = window.elementSdk?.config || defaultConfig;
          e.currentTarget.style.backgroundColor = config.primary_color || defaultConfig.primary_color;
          e.currentTarget.style.color = '#ffffff';
        }
      });
    });

    // Login functionality
    document.getElementById('loginBtn').addEventListener('click', (e) => {
      e.preventDefault();
      if (isAdmin) {
        isAdmin = false;
        e.currentTarget.innerHTML = '<i class="fa fa-lock"></i><span>Login Admin</span>';
        showToast('Berhasil logout');
        loadPage(currentPage);
      } else {
        document.getElementById('loginModal').classList.remove('hidden');
      }
    });

    document.getElementById('cancelLogin').addEventListener('click', () => {
      document.getElementById('loginModal').classList.add('hidden');
      document.getElementById('loginError').classList.add('hidden');
    });

    document.getElementById('loginForm').addEventListener('submit', (e) => {
      e.preventDefault();
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;
      
      if (username === 'admin' && password === 'admin') {
        isAdmin = true;
        document.getElementById('loginBtn').innerHTML = '<i class="fa fa-sign-out-alt"></i><span>Logout</span>';
        document.getElementById('loginModal').classList.add('hidden');
        document.getElementById('loginError').classList.add('hidden');
        showToast('Login berhasil!');
        loadPage(currentPage);
      } else {
        const errorEl = document.getElementById('loginError');
        errorEl.textContent = 'Username atau password salah';
        errorEl.style.color = '#ef4444';
        errorEl.classList.remove('hidden');
      }
    });

    // Toast notification
    function showToast(message) {
      const toast = document.createElement('div');
      const config = window.elementSdk?.config || defaultConfig;
      toast.className = 'fixed bottom-8 right-8 px-6 py-3 rounded-lg shadow-lg';
      toast.style.backgroundColor = config.primary_color || defaultConfig.primary_color;
      toast.style.color = '#ffffff';
      toast.textContent = message;
      document.body.appendChild(toast);
      setTimeout(() => toast.remove(), 3000);
    }

    // Load page content
    function loadPage(page) {
      currentPage = page;
      const content = document.getElementById('mainContent');
      const config = window.elementSdk?.config || defaultConfig;
      
      switch(page) {
        case 'beranda':
          content.innerHTML = `
            <div class="content-card">
              <h2 class="text-3xl font-bold mb-6" style="color: ${config.text_color || defaultConfig.text_color}">Dashboard Alumni</h2>
              <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="stat-card p-6" style="background-color: ${config.sidebar_color || defaultConfig.sidebar_color}">
                  <div class="flex items-center justify-between">
                    <div>
                      <div class="text-sm font-medium mb-2" style="color: ${config.secondary_color || defaultConfig.secondary_color}">Total Alumni</div>
                      <div class="text-4xl font-bold" style="color: ${config.primary_color || defaultConfig.primary_color}">${alumniData.length}</div>
                    </div>
                    <div class="text-5xl" style="color: ${config.primary_color || defaultConfig.primary_color}; opacity: 0.2;">
                      <i class="fa fa-users"></i>
                    </div>
                  </div>
                </div>
                <div class="stat-card p-6" style="background-color: ${config.sidebar_color || defaultConfig.sidebar_color}">
                  <div class="flex items-center justify-between">
                    <div>
                      <div class="text-sm font-medium mb-2" style="color: ${config.secondary_color || defaultConfig.secondary_color}">Melanjutkan Pendidikan</div>
                      <div class="text-4xl font-bold" style="color: ${config.primary_color || defaultConfig.primary_color}">${alumniData.filter(a => a.kelanjutan_pendidikan && a.kelanjutan_pendidikan !== '-').length}</div>
                    </div>
                    <div class="text-5xl" style="color: ${config.primary_color || defaultConfig.primary_color}; opacity: 0.2;">
                      <i class="fa fa-user-graduate"></i>
                    </div>
                  </div>
                </div>
                <div class="stat-card p-6" style="background-color: ${config.sidebar_color || defaultConfig.sidebar_color}">
                  <div class="flex items-center justify-between">
                    <div>
                      <div class="text-sm font-medium mb-2" style="color: ${config.secondary_color || defaultConfig.secondary_color}">Iuran Lunas</div>
                      <div class="text-4xl font-bold" style="color: ${config.primary_color || defaultConfig.primary_color}">${alumniData.filter(a => a.iuran_status === 'Lunas').length}</div>
                    </div>
                    <div class="text-5xl" style="color: ${config.primary_color || defaultConfig.primary_color}; opacity: 0.2;">
                      <i class="fa fa-check-circle"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          `;
          break;
          
        case 'alumni':
          let alumniHTML = `
            <div class="content-card">
              <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-bold" style="color: ${config.text_color || defaultConfig.text_color}">Data Alumni</h2>
                ${isAdmin ? '<button id="addAlumniBtn" class="btn-modern btn-primary px-6 py-3"><i class="fa fa-user-plus mr-2"></i>Tambah Alumni</button>' : ''}
              </div>
              <div class="table-modern" style="background-color: ${config.sidebar_color || defaultConfig.sidebar_color}">
                <table class="w-full">
                  <thead style="background-color: ${config.primary_color || defaultConfig.primary_color}; color: #ffffff;">
                    <tr>
                      <th class="px-6 py-4 text-left font-semibold">Nama</th>
                      <th class="px-6 py-4 text-left font-semibold">Tahun Masuk</th>
                      <th class="px-6 py-4 text-left font-semibold">Tahun Lulus</th>
                      ${isAdmin ? '<th class="px-6 py-4 text-left font-semibold">Aksi</th>' : ''}
                    </tr>
                  </thead>
                  <tbody>
          `;
          
          alumniData.forEach((alumni, index) => {
            alumniHTML += `
              <tr style="border-bottom: 1px solid rgba(0,0,0,0.05)">
                <td class="px-6 py-4" style="color: ${config.text_color || defaultConfig.text_color}"><i class="fa fa-user mr-2" style="color: ${config.secondary_color || defaultConfig.secondary_color}"></i>${alumni.nama}</td>
                <td class="px-6 py-4" style="color: ${config.text_color || defaultConfig.text_color}">${alumni.tahun_masuk}</td>
                <td class="px-6 py-4" style="color: ${config.text_color || defaultConfig.text_color}">${alumni.tahun_lulus}</td>
                ${isAdmin ? `<td class="px-6 py-4"><button class="deleteAlumniBtn btn-modern btn-secondary px-4 py-2 text-sm" data-id="${alumni.__backendId}"><i class="fa fa-trash mr-1"></i>Hapus</button></td>` : ''}
              </tr>
            `;
          });
          
          alumniHTML += `
                  </tbody>
                </table>
              </div>
            </div>
          `;
          
          content.innerHTML = alumniHTML;
          
          if (isAdmin) {
            document.getElementById('addAlumniBtn')?.addEventListener('click', showAlumniForm);
            document.querySelectorAll('.deleteAlumniBtn').forEach(btn => {
              btn.addEventListener('click', async (e) => {
                const id = e.target.getAttribute('data-id');
                const alumni = alumniData.find(a => a.__backendId === id);
                if (alumni) {
                  e.target.disabled = true;
                  e.target.textContent = 'Menghapus...';
                  const result = await window.dataSdk.delete(alumni);
                  if (result.isOk) {
                    showToast('Alumni berhasil dihapus');
                  } else {
                    showToast('Gagal menghapus alumni');
                    e.target.disabled = false;
                    e.target.textContent = 'Hapus';
                  }
                }
              });
            });
          }
          break;
          
        case 'pendidikan':
          let pendidikanHTML = `
            <div class="content-card">
              <h2 class="text-3xl font-bold mb-6" style="color: ${config.text_color || defaultConfig.text_color}">Kelanjutan Pendidikan</h2>
              <div class="table-modern" style="background-color: ${config.sidebar_color || defaultConfig.sidebar_color}">
                <table class="w-full">
                  <thead style="background-color: ${config.primary_color || defaultConfig.primary_color}; color: #ffffff;">
                    <tr>
                      <th class="px-6 py-4 text-left font-semibold">Nama</th>
                      <th class="px-6 py-4 text-left font-semibold">Kelanjutan Pendidikan</th>
                    </tr>
                  </thead>
                  <tbody>
          `;
          
          alumniData.forEach((alumni, index) => {
            pendidikanHTML += `
              <tr style="border-bottom: 1px solid rgba(0,0,0,0.05)">
                <td class="px-6 py-4" style="color: ${config.text_color || defaultConfig.text_color}"><i class="fa fa-user mr-2" style="color: ${config.secondary_color || defaultConfig.secondary_color}"></i>${alumni.nama}</td>
                <td class="px-6 py-4" style="color: ${config.text_color || defaultConfig.text_color}"><i class="fa fa-university mr-2" style="color: ${config.secondary_color || defaultConfig.secondary_color}"></i>${alumni.kelanjutan_pendidikan || '-'}</td>
              </tr>
            `;
          });
          
          pendidikanHTML += `
                  </tbody>
                </table>
              </div>
            </div>
          `;
          
          content.innerHTML = pendidikanHTML;
          break;
          
        case 'iuran':
          let iuranHTML = `
            <div class="content-card">
              <h2 class="text-3xl font-bold mb-6" style="color: ${config.text_color || defaultConfig.text_color}">Status Iuran</h2>
              <div class="table-modern" style="background-color: ${config.sidebar_color || defaultConfig.sidebar_color}">
                <table class="w-full">
                  <thead style="background-color: ${config.primary_color || defaultConfig.primary_color}; color: #ffffff;">
                    <tr>
                      <th class="px-6 py-4 text-left font-semibold">Nama</th>
                      <th class="px-6 py-4 text-left font-semibold">Status Iuran</th>
                      ${isAdmin ? '<th class="px-6 py-4 text-center font-semibold">Sudah Bayar</th>' : ''}
                    </tr>
                  </thead>
                  <tbody>
          `;
          
          alumniData.forEach((alumni, index) => {
            const statusColor = alumni.iuran_status === 'Lunas' ? '#10b981' : '#ef4444';
            const statusIcon = alumni.iuran_status === 'Lunas' ? 'fa-check-circle' : 'fa-times-circle';
            const isChecked = alumni.iuran_status === 'Lunas' ? 'checked' : '';
            iuranHTML += `
              <tr style="border-bottom: 1px solid rgba(0,0,0,0.05)">
                <td class="px-6 py-4" style="color: ${config.text_color || defaultConfig.text_color}"><i class="fa fa-user mr-2" style="color: ${config.secondary_color || defaultConfig.secondary_color}"></i>${alumni.nama}</td>
                <td class="px-6 py-4"><span class="px-4 py-2 rounded-lg text-white text-sm font-semibold inline-flex items-center gap-2" style="background-color: ${statusColor}"><i class="fa ${statusIcon}"></i>${alumni.iuran_status || 'Belum Bayar'}</span></td>
                ${isAdmin ? `<td class="px-6 py-4 text-center"><input type="checkbox" class="iuran-checkbox w-5 h-5 cursor-pointer" data-id="${alumni.__backendId}" ${isChecked} style="accent-color: #10b981;"></td>` : ''}
              </tr>
            `;
          });
          
          iuranHTML += `
                  </tbody>
                </table>
              </div>
            </div>
          `;
          
          content.innerHTML = iuranHTML;
          
          if (isAdmin) {
            document.querySelectorAll('.iuran-checkbox').forEach(checkbox => {
              checkbox.addEventListener('change', async (e) => {
                const id = e.target.getAttribute('data-id');
                const alumni = alumniData.find(a => a.__backendId === id);
                if (alumni) {
                  e.target.disabled = true;
                  
                  const updatedAlumni = {
                    ...alumni,
                    iuran_status: e.target.checked ? 'Lunas' : 'Belum Bayar'
                  };
                  
                  const result = await window.dataSdk.update(updatedAlumni);
                  
                  if (result.isOk) {
                    showToast(e.target.checked ? 'Status diubah menjadi Lunas' : 'Status diubah menjadi Belum Bayar');
                  } else {
                    showToast('Gagal mengubah status iuran');
                    e.target.checked = !e.target.checked;
                  }
                  
                  e.target.disabled = false;
                }
              });
            });
          }
          break;
          
        case 'whatsapp':
          content.innerHTML = `
            <div class="content-card">
              <h2 class="text-3xl font-bold mb-6" style="color: ${config.text_color || defaultConfig.text_color}">Group WhatsApp</h2>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="stat-card p-8 text-center" style="background-color: ${config.sidebar_color || defaultConfig.sidebar_color}">
                  <div class="text-6xl mb-4" style="color: ${config.primary_color || defaultConfig.primary_color}">
                    <i class="fab fa-whatsapp"></i>
                  </div>
                  <h3 class="text-xl font-bold mb-3" style="color: ${config.text_color || defaultConfig.text_color}">Group Cewek</h3>
                  <p class="mb-4" style="color: ${config.secondary_color || defaultConfig.secondary_color}">Bergabunglah dengan group alumni perempuan</p>
                  <a href="${config.wa_cewek || defaultConfig.wa_cewek}" target="_blank" rel="noopener noreferrer" class="btn-modern btn-primary inline-flex items-center gap-2 px-6 py-3"><i class="fab fa-whatsapp"></i>Gabung Group</a>
                </div>
                <div class="stat-card p-8 text-center" style="background-color: ${config.sidebar_color || defaultConfig.sidebar_color}">
                  <div class="text-6xl mb-4" style="color: ${config.primary_color || defaultConfig.primary_color}">
                    <i class="fab fa-whatsapp"></i>
                  </div>
                  <h3 class="text-xl font-bold mb-3" style="color: ${config.text_color || defaultConfig.text_color}">Group Cowok</h3>
                  <p class="mb-4" style="color: ${config.secondary_color || defaultConfig.secondary_color}">Bergabunglah dengan group alumni laki-laki</p>
                  <a href="${config.wa_cowok || defaultConfig.wa_cowok}" target="_blank" rel="noopener noreferrer" class="btn-modern btn-primary inline-flex items-center gap-2 px-6 py-3"><i class="fab fa-whatsapp"></i>Gabung Group</a>
                </div>
              </div>
            </div>
          `;
          break;
          
        case 'tugas':
          let tugasHTML = `
            <div class="content-card">
              <h2 class="text-3xl font-bold mb-6" style="color: ${config.text_color || defaultConfig.text_color}">Tugas/Pengabdian</h2>
              <div class="table-modern" style="background-color: ${config.sidebar_color || defaultConfig.sidebar_color}">
                <table class="w-full">
                  <thead style="background-color: ${config.primary_color || defaultConfig.primary_color}; color: #ffffff;">
                    <tr>
                      <th class="px-6 py-4 text-left font-semibold">Nama</th>
                      <th class="px-6 py-4 text-left font-semibold">Tugas</th>
                    </tr>
                  </thead>
                  <tbody>
          `;
          
          alumniData.forEach((alumni, index) => {
            tugasHTML += `
              <tr style="border-bottom: 1px solid rgba(0,0,0,0.05)">
                <td class="px-6 py-4" style="color: ${config.text_color || defaultConfig.text_color}"><i class="fa fa-user mr-2" style="color: ${config.secondary_color || defaultConfig.secondary_color}"></i>${alumni.nama}</td>
                <td class="px-6 py-4" style="color: ${config.text_color || defaultConfig.text_color}"><i class="fa fa-clipboard-list mr-2" style="color: ${config.secondary_color || defaultConfig.secondary_color}"></i>${alumni.tugas || '-'}</td>
              </tr>
            `;
          });
          
          tugasHTML += `
                  </tbody>
                </table>
              </div>
            </div>
          `;
          
          content.innerHTML = tugasHTML;
          break;

        case 'form-daftar':
          content.innerHTML = `
            <div class="content-card max-w-3xl mx-auto">
              <div class="text-center mb-8">
                <div class="inline-flex items-center justify-center w-20 h-20 rounded-full mb-4" style="background-color: rgba(16, 185, 129, 0.1);">
                  <i class="fa fa-user-plus text-4xl" style="color: #10b981;"></i>
                </div>
                <h2 class="text-3xl font-bold mb-2" style="color: ${config.text_color || defaultConfig.text_color}">Form Pendaftaran Alumni</h2>
                <p style="color: ${config.secondary_color || defaultConfig.secondary_color}">Silakan isi data Anda dengan lengkap dan benar</p>
              </div>
              
              <div class="stat-card p-8" style="background-color: ${config.sidebar_color || defaultConfig.sidebar_color}">
                <form id="publicAlumniForm">
                  <div class="mb-5">
                    <label class="block mb-2 font-semibold flex items-center gap-2" style="color: ${config.text_color || defaultConfig.text_color}">
                      <i class="fa fa-user"></i>
                      <span>Nama Lengkap</span>
                      <span style="color: #ef4444;">*</span>
                    </label>
                    <input type="text" name="nama" class="w-full px-4 py-3 border-2 rounded-lg focus:outline-none" placeholder="Masukkan nama lengkap" required style="border-color: #e5e7eb;">
                  </div>

                  <div class="mb-5">
                    <label class="block mb-2 font-semibold flex items-center gap-2" style="color: ${config.text_color || defaultConfig.text_color}">
                      <i class="fa fa-birthday-cake"></i>
                      <span>Tempat, Tanggal Lahir</span>
                      <span style="color: #ef4444;">*</span>
                    </label>
                    <input type="text" name="ttl" class="w-full px-4 py-3 border-2 rounded-lg focus:outline-none" placeholder="Contoh: Jakarta, 15 Agustus 2000" required style="border-color: #e5e7eb;">
                  </div>

                  <div class="grid grid-cols-1 md:grid-cols-2 gap-5 mb-5">
                    <div>
                      <label class="block mb-2 font-semibold flex items-center gap-2" style="color: ${config.text_color || defaultConfig.text_color}">
                        <i class="fa fa-calendar-alt"></i>
                        <span>Tahun Masuk</span>
                        <span style="color: #ef4444;">*</span>
                      </label>
                      <input type="text" name="tahun_masuk" class="w-full px-4 py-3 border-2 rounded-lg focus:outline-none" placeholder="Contoh: 2018" required style="border-color: #e5e7eb;">
                    </div>

                    <div>
                      <label class="block mb-2 font-semibold flex items-center gap-2" style="color: ${config.text_color || defaultConfig.text_color}">
                        <i class="fa fa-calendar-check"></i>
                        <span>Tahun Lulus</span>
                        <span style="color: #ef4444;">*</span>
                      </label>
                      <input type="text" name="tahun_lulus" class="w-full px-4 py-3 border-2 rounded-lg focus:outline-none" placeholder="Contoh: 2021" required style="border-color: #e5e7eb;">
                    </div>
                  </div>

                  <div class="mb-5">
                    <label class="block mb-2 font-semibold flex items-center gap-2" style="color: ${config.text_color || defaultConfig.text_color}">
                      <i class="fa fa-venus-mars"></i>
                      <span>Jenis Kelamin</span>
                      <span style="color: #ef4444;">*</span>
                    </label>
                    <select name="jenis_kelamin" class="w-full px-4 py-3 border-2 rounded-lg focus:outline-none" required style="border-color: #e5e7eb;">
                      <option value="">Pilih Jenis Kelamin</option>
                      <option value="Laki-laki">Laki-laki</option>
                      <option value="Perempuan">Perempuan</option>
                    </select>
                  </div>

                  <div class="mb-5">
                    <label class="block mb-2 font-semibold flex items-center gap-2" style="color: ${config.text_color || defaultConfig.text_color}">
                      <i class="fa fa-university"></i>
                      <span>Kelanjutan Pendidikan</span>
                    </label>
                    <input type="text" name="kelanjutan_pendidikan" class="w-full px-4 py-3 border-2 rounded-lg focus:outline-none" placeholder="Contoh: S1 Universitas Indonesia (Opsional)" style="border-color: #e5e7eb;">
                    <p class="text-sm mt-1" style="color: ${config.secondary_color || defaultConfig.secondary_color}">Kosongkan jika tidak melanjutkan</p>
                  </div>

                  <div class="mb-6">
                    <label class="block mb-2 font-semibold flex items-center gap-2" style="color: ${config.text_color || defaultConfig.text_color}">
                      <i class="fa fa-briefcase"></i>
                      <span>Tugas/Pekerjaan Saat Ini</span>
                    </label>
                    <input type="text" name="tugas" class="w-full px-4 py-3 border-2 rounded-lg focus:outline-none" placeholder="Contoh: Software Engineer di PT. ABC (Opsional)" style="border-color: #e5e7eb;">
                    <p class="text-sm mt-1" style="color: ${config.secondary_color || defaultConfig.secondary_color}">Kosongkan jika tidak/belum bekerja</p>
                  </div>

                  <div class="flex gap-3">
                    <button type="submit" class="btn-modern flex-1 py-4 px-6 font-semibold text-lg flex items-center justify-center gap-2" style="background-color: #10b981; color: #ffffff;">
                      <i class="fa fa-paper-plane"></i>
                      <span>Kirim Data</span>
                    </button>
                  </div>

                  <div id="formMessage" class="mt-4 p-4 rounded-lg text-center font-semibold hidden"></div>
                </form>
              </div>
            </div>
          `;

          document.getElementById('publicAlumniForm')?.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            if (alumniData.length >= 999) {
              const msgEl = document.getElementById('formMessage');
              msgEl.textContent = '‚ùå Maaf, kapasitas database sudah penuh (999 data)';
              msgEl.style.backgroundColor = '#fee2e2';
              msgEl.style.color = '#dc2626';
              msgEl.classList.remove('hidden');
              return;
            }
            
            const submitBtn = e.target.querySelector('button[type="submit"]');
            const originalContent = submitBtn.innerHTML;
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<div class="loading-spinner mx-auto"></div>';
            
            const formData = new FormData(e.target);
            const newAlumni = {
              id: Date.now().toString(),
              nama: formData.get('nama'),
              ttl: formData.get('ttl'),
              tahun_masuk: formData.get('tahun_masuk'),
              tahun_lulus: formData.get('tahun_lulus'),
              jenis_kelamin: formData.get('jenis_kelamin'),
              kelanjutan_pendidikan: formData.get('kelanjutan_pendidikan') || '-',
              iuran_status: 'Belum Bayar',
              tugas: formData.get('tugas') || '-',
              created_at: new Date().toISOString()
            };
            
            const result = await window.dataSdk.create(newAlumni);
            
            const msgEl = document.getElementById('formMessage');
            if (result.isOk) {
              msgEl.textContent = '‚úÖ Data berhasil dikirim! Terima kasih telah mendaftar.';
              msgEl.style.backgroundColor = '#d1fae5';
              msgEl.style.color = '#065f46';
              msgEl.classList.remove('hidden');
              e.target.reset();
              setTimeout(() => {
                msgEl.classList.add('hidden');
              }, 5000);
            } else {
              msgEl.textContent = '‚ùå Gagal mengirim data. Silakan coba lagi.';
              msgEl.style.backgroundColor = '#fee2e2';
              msgEl.style.color = '#dc2626';
              msgEl.classList.remove('hidden');
            }
            
            submitBtn.disabled = false;
            submitBtn.innerHTML = originalContent;
          });
          break;
      }
    }

    function showAlumniForm() {
      const config = window.elementSdk?.config || defaultConfig;
      const modal = document.createElement('div');
      modal.className = 'modal-backdrop fixed inset-0 flex items-center justify-center';
      modal.style.backgroundColor = 'rgba(0,0,0,0.5)';
      modal.style.zIndex = '1000';
      modal.innerHTML = `
        <div class="rounded-2xl shadow-2xl p-8 max-w-md w-full max-h-screen overflow-y-auto" style="background-color: ${config.sidebar_color || defaultConfig.sidebar_color}">
          <div class="text-center mb-6">
            <div class="inline-flex items-center justify-center w-16 h-16 rounded-full mb-4" style="background-color: rgba(59, 130, 246, 0.1);">
              <i class="fa fa-user-plus text-3xl" style="color: ${config.primary_color || defaultConfig.primary_color};"></i>
            </div>
            <h3 class="text-2xl font-bold" style="color: ${config.text_color || defaultConfig.text_color}">Tambah Alumni</h3>
          </div>
          <form id="alumniForm">
            <div class="mb-4">
              <label class="block mb-2 font-semibold flex items-center gap-2" style="color: ${config.text_color || defaultConfig.text_color}">
                <i class="fa fa-user"></i>
                <span>Nama</span>
              </label>
              <input type="text" name="nama" class="w-full px-4 py-3 border-2 rounded-lg focus:outline-none" required style="border-color: #e5e7eb;">
            </div>
            <div class="mb-4">
              <label class="block mb-2 font-semibold flex items-center gap-2" style="color: ${config.text_color || defaultConfig.text_color}">
                <i class="fa fa-calendar-alt"></i>
                <span>Tahun Masuk</span>
              </label>
              <input type="text" name="tahun_masuk" class="w-full px-4 py-3 border-2 rounded-lg focus:outline-none" required style="border-color: #e5e7eb;">
            </div>
            <div class="mb-4">
              <label class="block mb-2 font-semibold flex items-center gap-2" style="color: ${config.text_color || defaultConfig.text_color}">
                <i class="fa fa-calendar-check"></i>
                <span>Tahun Lulus</span>
              </label>
              <input type="text" name="tahun_lulus" class="w-full px-4 py-3 border-2 rounded-lg focus:outline-none" required style="border-color: #e5e7eb;">
            </div>
            <div class="mb-4">
              <label class="block mb-2 font-semibold flex items-center gap-2" style="color: ${config.text_color || defaultConfig.text_color}">
                <i class="fa fa-venus-mars"></i>
                <span>Jenis Kelamin</span>
              </label>
              <select name="jenis_kelamin" class="w-full px-4 py-3 border-2 rounded-lg focus:outline-none" required style="border-color: #e5e7eb;">
                <option value="">Pilih</option>
                <option value="Laki-laki">Laki-laki</option>
                <option value="Perempuan">Perempuan</option>
              </select>
            </div>
            <div class="mb-4">
              <label class="block mb-2 font-semibold flex items-center gap-2" style="color: ${config.text_color || defaultConfig.text_color}">
                <i class="fa fa-university"></i>
                <span>Kelanjutan Pendidikan</span>
              </label>
              <input type="text" name="kelanjutan_pendidikan" class="w-full px-4 py-3 border-2 rounded-lg focus:outline-none" style="border-color: #e5e7eb;">
            </div>
            <div class="mb-4">
              <label class="block mb-2 font-semibold flex items-center gap-2" style="color: ${config.text_color || defaultConfig.text_color}">
                <i class="fa fa-money-bill-wave"></i>
                <span>Status Iuran</span>
              </label>
              <select name="iuran_status" class="w-full px-4 py-3 border-2 rounded-lg focus:outline-none" required style="border-color: #e5e7eb;">
                <option value="Belum Bayar">Belum Bayar</option>
                <option value="Lunas">Lunas</option>
              </select>
            </div>
            <div class="mb-6">
              <label class="block mb-2 font-semibold flex items-center gap-2" style="color: ${config.text_color || defaultConfig.text_color}">
                <i class="fa fa-tasks"></i>
                <span>Tugas</span>
              </label>
              <input type="text" name="tugas" class="w-full px-4 py-3 border-2 rounded-lg focus:outline-none" style="border-color: #e5e7eb;">
            </div>
            <div class="flex gap-3">
              <button type="submit" class="btn-modern btn-primary flex-1 py-3 px-4 font-semibold flex items-center justify-center gap-2">
                <i class="fa fa-save"></i>
                <span>Simpan</span>
              </button>
              <button type="button" class="btn-modern btn-secondary flex-1 py-3 px-4 font-semibold" onclick="this.closest('.fixed').remove()">
                <i class="fa fa-times mr-2"></i>Batal
              </button>
            </div>
          </form>
        </div>
      `;
      
      document.body.appendChild(modal);
      
      modal.querySelector('#alumniForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        if (alumniData.length >= 999) {
          showToast('Maksimum 999 alumni tercapai. Hapus data terlebih dahulu.');
          return;
        }
        
        const submitBtn = e.target.querySelector('button[type="submit"]');
        submitBtn.disabled = true;
        submitBtn.innerHTML = '<div class="loading-spinner mx-auto"></div>';
        
        const formData = new FormData(e.target);
        const newAlumni = {
          id: Date.now().toString(),
          nama: formData.get('nama'),
          tahun_masuk: formData.get('tahun_masuk'),
          tahun_lulus: formData.get('tahun_lulus'),
          jenis_kelamin: formData.get('jenis_kelamin'),
          kelanjutan_pendidikan: formData.get('kelanjutan_pendidikan') || '-',
          iuran_status: formData.get('iuran_status'),
          tugas: formData.get('tugas') || '-',
          created_at: new Date().toISOString()
        };
        
        const result = await window.dataSdk.create(newAlumni);
        
        if (result.isOk) {
          showToast('Alumni berhasil ditambahkan');
          modal.remove();
        } else {
          showToast('Gagal menambahkan alumni');
          submitBtn.disabled = false;
          submitBtn.innerHTML = '<span>Simpan</span>';
        }
      });
    }

    // Initialize app
    initApp();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a101a32e1c687b1',t:'MTc2MzU1OTQ0Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
